/*! BasicTestSite 2018-01-08 */
angular.module("cms.products",["ngRoute","cms.shared"]).constant("_",window._).constant("products.modulePath","/Cofoundry/Admin/Modules/Products/Js/"),angular.module("cms.products").config(["$routeProvider","shared.routingUtilities","products.modulePath",function(a,b,c){a.otherwise(b.mapOptions(c,"ProductDetails"))}]),angular.module("cms.products").factory("products.productService",["$http","$q","shared.serviceBase",function(a,b,c){var d={};return d.getProductDetails=function(){var a=b.defer();return a.resolve({title:"Test Product",ref:"TEST01"}),a.promise},d}]),angular.module("cms.products").controller("ProductDetailsController",["shared.LoadState","shared.permissionValidationService","products.productService","products.modulePath",function(a,b,c,d){function e(){n.edit=f,n.save=g,n.cancel=h,n.editMode=!1,n.globalLoadState=new a,n.saveLoadState=new a,n.formLoadState=new a(!0),n.canUpdate=!0,j().then(m.bind(null,n.formLoadState))}function f(){n.editMode=!0,n.mainForm.formStatus.clear()}function g(){l(n.saveLoadState),c.update(n.command).then(i.bind(null,"Changes were saved successfully"))["finally"](m.bind(null,n.saveLoadState))}function h(){n.editMode=!1,n.command=k(n.product),n.mainForm.formStatus.clear()}function i(a){return j().then(n.mainForm.formStatus.success.bind(null,a))}function j(){function a(a){n.product=a,n.command=k(a),n.editMode=!1}return c.getProductDetails().then(a)}function k(a){return _.pick(a,"title","ref","test")}function l(a){n.globalLoadState.on(),a&&_.isFunction(a.on)&&a.on()}function m(a){n.globalLoadState.off(),a&&_.isFunction(a.off)&&a.off()}var n=this;e()}]);